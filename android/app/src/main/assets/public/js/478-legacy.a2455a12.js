"use strict";(self["webpackChunkZawadi"]=self["webpackChunkZawadi"]||[]).push([[478],{5402:(e,t,a)=>{a.d(t,{BO:()=>i,Lr:()=>o,QP:()=>l,UT:()=>u,bw:()=>_,ob:()=>d,uZ:()=>c});a(8862),a(7658);var s=a(3978),n=a(3274),r=a(8433);const i=async()=>{const e=new s.K({name:"seller_info"});e.create();const t=await e.get("stoken");if(!t)return!1;{const s=JSON.parse(t);try{const e=await(0,r.Z)({url:"v2/ping",method:"GET",headers:{Authorization:`Bearer ${s.access}`}});if(e.data["done"])return!0}catch(a){if(401==a.response.status){const t=new FormData;t.append("refresh",s.refresh);try{const a=await(0,r.Z)({url:"api/token/refresh/",method:"POST",data:t});return s.access=a.data["access"],e.set("stoken",JSON.stringify(s)),!0}catch(a){if(401==a.response.status)return!1}}}}},l=async e=>{const t=await n.G0.create({message:e});return t.present(),t},o=async(e,t)=>{const a=await n.Cl.create({header:e,message:t,buttons:["OK"]});await a.present()},c=async(e,t,a,s)=>{const r=await n.Cl.create({header:e,message:t,buttons:[{text:"Fermer",role:"cancel"},{text:a,role:"confirm",handler:()=>{s()}}]});await r.present()},d=async(e,t,a="primary")=>{const s=await n.Mn.create({mode:"ios",message:t,position:e,duration:3900,color:a});await s.present()},u=async(e,t,a)=>{const n=new s.K({name:"seller_info"});n.create();const i=await n.get("stoken");if(!i)return a&&a.dismiss(),t.push(`/seller?redirect=${e}`);{const a=JSON.parse(i);try{await(0,r.Z)({url:"v2/ping",method:"GET",headers:{Authorization:`Bearer ${a.access}`}});return a.access}catch(l){if(401==l.response.status){const s=new FormData;s.append("refresh",a.refresh);try{const e=await(0,r.Z)({url:"api/token/refresh/",method:"POST",data:s});return a.access=e.data["access"],n.set("stoken",JSON.stringify(a)),e.data["access"]}catch(l){if(401==l.response.status)return t.push(`/seller?redirect=${e}`)}}}}},_=e=>{window.location.href="tel:"+e}},2194:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var s=a(6252),n=a(2262),r=a(3577);const i=a.p+"img/retrait.bfc4c8f3.svg";var l=a(3274),o=a(8903),c=a(5402),d=a(8433),u=a(2201);const _=e=>((0,s.dD)("data-v-42512504"),e=e(),(0,s.Cn)(),e),w={class:"ban"},p={class:"myico yellow_bg"},v={class:"ban_cont"},m=_((()=>(0,s._)("div",{class:"title_b"},"Solde total",-1))),f={class:"contentb"},y={class:"ban"},g={class:"myico green_bg"},h={class:"ban_cont"},S=_((()=>(0,s._)("div",{class:"title_b"},"Solde disponible",-1))),b={class:"contentb"},U={class:"ban"},k={class:"myico orange_bg"},z={class:"ban_cont"},W=_((()=>(0,s._)("div",{class:"title_b"},"Produits vendus",-1))),j={class:"contentb"},O={style:{"padding-left":"1rem","padding-right":"1rem"}},Z=_((()=>(0,s._)("div",{class:"mytitle"},"Historiques des paiements",-1))),T=_((()=>(0,s._)("span",{style:{"font-weight":"bold"}},"Montant: ",-1))),C={style:{color:"gray"}},D=_((()=>(0,s._)("div",{style:{display:"flex","justify-content":"space-around",padding:"2rem"}},[(0,s._)("img",{src:i,style:{width:"60%"}})],-1))),L=_((()=>(0,s._)("div",{style:{"text-align":"center","padding-left":"1.5rem","padding-right":"1.5rem"}}," Aucune transactions trouvé. ",-1))),P=_((()=>(0,s._)("div",{style:{"min-height":"95vh"}},null,-1))),$={__name:"PayView",setup(e){const t=e=>{const t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString()},a=(0,n.iH)(!1),i=(0,n.iH)(),_=(0,u.tv)(),$=async()=>{const e=await(0,c.QP)("Loading..."),t=await d.Z.get("v2/api/get_spays/",{headers:{Authorization:`Bearer ${await(0,c.UT)("/seller/pay/",_)}`}});t.data["done"]&&(i.value=t.data["result"],a.value=!0,e.dismiss())};$();const A=async()=>{if(!i.value.solde)return(0,c.Lr)("Retrait impossible","Votre solde est insuffisant.");if(i.value.has_retr)return(0,c.Lr)("Retrait impossible","Vous avez déjà un retrait en cours.");const e=await(0,c.QP)("Loading..."),t=await d.Z.get("v2/api/encaisser/",{headers:{Authorization:`Bearer ${await(0,c.UT)("/seller/pay/",_)}`}});t.data["done"]&&(e.dismiss(),await $())};return(e,d)=>{const u=(0,s.up)("ion-icon"),_=(0,s.up)("ion-list");return(0,s.wg)(),(0,s.j4)((0,n.SU)(l._i),null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(l.Gu),null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(l.sr),{color:"secondary"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(l.Sm),{slot:"start"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(l.oU),{"default-href":"/seller"})])),_:1}),(0,s.Wm)((0,n.SU)(l.wd),null,{default:(0,s.w5)((()=>[(0,s.Uk)("Activité de paiement")])),_:1})])),_:1})])),_:1}),a.value?((0,s.wg)(),(0,s.j4)((0,n.SU)(l.W2),{key:0},{default:(0,s.w5)((()=>[(0,s._)("div",w,[(0,s._)("div",p,[(0,s.Wm)(u,{icon:(0,n.SU)(o.V7I)},null,8,["icon"])]),(0,s._)("div",v,[m,(0,s._)("div",f,"XOF"+(0,r.zw)(i.value.total_solde),1)])]),(0,s._)("div",y,[(0,s._)("div",g,[(0,s.Wm)(u,{icon:(0,n.SU)(o.V7I)},null,8,["icon"])]),(0,s._)("div",h,[S,(0,s._)("div",b,"XOF"+(0,r.zw)(i.value.solde),1)])]),(0,s._)("div",U,[(0,s._)("div",k,[(0,s.Wm)(u,{icon:(0,n.SU)(o.MI)},null,8,["icon"])]),(0,s._)("div",z,[W,(0,s._)("div",j,(0,r.zw)(i.value.p_count),1)])]),(0,s._)("div",O,[(0,s.Wm)((0,n.SU)(l.YG),{onClick:d[0]||(d[0]=e=>A()),color:"secondary",expand:"full"},{default:(0,s.w5)((()=>[(0,s.Uk)("Encaisser")])),_:1})]),Z,i.value.pays.length?((0,s.wg)(),(0,s.j4)(_,{key:0},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.value.pays,(e=>((0,s.wg)(),(0,s.j4)((0,n.SU)(l.Ie),{key:e.id},{default:(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(l.Q$),null,{default:(0,s.w5)((()=>[(0,s._)("h2",null,[T,(0,s.Uk)((0,r.zw)(e.currency)+(0,r.zw)(e.montant),1)]),(0,s._)("div",null,[(0,s._)("div",null,[(0,s.Uk)(" Type : "),(0,s._)("span",{style:(0,r.j5)({color:e.get_tcolor})},(0,r.zw)(e.type_of),5)]),(0,s._)("div",null,[(0,s.Uk)(" Etat : "),(0,s._)("span",{style:(0,r.j5)({color:e.get_color})},(0,r.zw)(e.statut),5)]),(0,s._)("div",null,[(0,s.Uk)(" Reference ID : "),(0,s._)("span",null,(0,r.zw)(e.transaction_id),1)]),(0,s._)("div",C,(0,r.zw)(t(e.created_at)),1)])])),_:2},1024),(0,s.Wm)((0,n.SU)(l.YG),{onClick:d[1]||(d[1]=e=>(0,n.SU)(c.bw)(i.value.call_num)),color:"tertiary",slot:"end"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{slot:"icon-only",icon:(0,n.SU)(o.REe)},null,8,["icon"])])),_:1})])),_:2},1024)))),128))])),_:1})):((0,s.wg)(),(0,s.j4)(_,{key:1},{default:(0,s.w5)((()=>[D,L])),_:1}))])),_:1})):((0,s.wg)(),(0,s.j4)((0,n.SU)(l.W2),{key:1},{default:(0,s.w5)((()=>[P])),_:1}))])),_:1})}}};var A=a(3744);const G=(0,A.Z)($,[["__scopeId","data-v-42512504"]]),I=G}}]);
//# sourceMappingURL=478-legacy.a2455a12.js.map