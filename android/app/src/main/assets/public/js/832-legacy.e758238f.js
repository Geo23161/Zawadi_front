"use strict";(self["webpackChunkZawadi"]=self["webpackChunkZawadi"]||[]).push([[832],{8071:(e,t,a)=>{a.d(t,{BO:()=>r,UT:()=>i,ZP:()=>o});a(8862),a(7658);var s=a(3978),n=a(8433);const r=async()=>{const e=new s.K({name:"patner_info"});e.create();const t=await e.get("ptoken");if(!t)return!1;{const s=JSON.parse(t);try{const e=await(0,n.Z)({url:"v2/ping",method:"GET",headers:{Authorization:`Bearer ${s.access}`}});if(e.data["done"])return!0}catch(a){if(401==a.response.status){const t=new FormData;t.append("refresh",s.refresh);try{const a=await(0,n.Z)({url:"api/token/refresh/",method:"POST",data:t});return s.access=a.data["access"],e.set("ptoken",JSON.stringify(s)),!0}catch(a){if(401==a.response.status)return!1}}}}},i=async(e,t,a)=>{const r=new s.K({name:"patner_info"});r.create();const i=await r.get("ptoken");if(!i)return a&&a.dismiss(),t.push(`/seller?redirect=${e}`);{const a=JSON.parse(i);try{await(0,n.Z)({url:"v2/ping",method:"GET",headers:{Authorization:`Bearer ${a.access}`}});return a.access}catch(o){if(401==o.response.status){const s=new FormData;s.append("refresh",a.refresh);try{const e=await(0,n.Z)({url:"api/token/refresh/",method:"POST",data:s});return a.access=e.data["access"],r.set("ptoken",JSON.stringify(a)),e.data["access"]}catch(o){if(401==o.response.status)return t.push(`/seller?redirect=${e}`)}}}}},o=i},5402:(e,t,a)=>{a.d(t,{BO:()=>i,Lr:()=>c,QP:()=>o,UT:()=>u,bw:()=>p,ob:()=>d,uZ:()=>l});a(8862),a(7658);var s=a(3978),n=a(3274),r=a(8433);const i=async()=>{const e=new s.K({name:"seller_info"});e.create();const t=await e.get("stoken");if(!t)return!1;{const s=JSON.parse(t);try{const e=await(0,r.Z)({url:"v2/ping",method:"GET",headers:{Authorization:`Bearer ${s.access}`}});if(e.data["done"])return!0}catch(a){if(401==a.response.status){const t=new FormData;t.append("refresh",s.refresh);try{const a=await(0,r.Z)({url:"api/token/refresh/",method:"POST",data:t});return s.access=a.data["access"],e.set("stoken",JSON.stringify(s)),!0}catch(a){if(401==a.response.status)return!1}}}}},o=async e=>{const t=await n.G0.create({message:e});return t.present(),t},c=async(e,t)=>{const a=await n.Cl.create({header:e,message:t,buttons:["OK"]});await a.present()},l=async(e,t,a,s)=>{const r=await n.Cl.create({header:e,message:t,buttons:[{text:"Fermer",role:"cancel"},{text:a,role:"confirm",handler:()=>{s()}}]});await r.present()},d=async(e,t,a="primary")=>{const s=await n.Mn.create({mode:"ios",message:t,position:e,duration:3900,color:a});await s.present()},u=async(e,t,a)=>{const n=new s.K({name:"seller_info"});n.create();const i=await n.get("stoken");if(!i)return a&&a.dismiss(),t.push(`/seller?redirect=${e}`);{const a=JSON.parse(i);try{await(0,r.Z)({url:"v2/ping",method:"GET",headers:{Authorization:`Bearer ${a.access}`}});return a.access}catch(o){if(401==o.response.status){const s=new FormData;s.append("refresh",a.refresh);try{const e=await(0,r.Z)({url:"api/token/refresh/",method:"POST",data:s});return a.access=e.data["access"],n.set("stoken",JSON.stringify(a)),e.data["access"]}catch(o){if(401==o.response.status)return t.push(`/seller?redirect=${e}`)}}}}},p=e=>{window.location.href="tel:"+e}},6467:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var s=a(6252),n=a(2262),r=a(3577);const i=a.p+"img/retrait_p.4eb7a5a8.svg";var o=a(3274),c=a(8903),l=a(5402),d=a(8071),u=a(8433),p=a(2201);const w=e=>((0,s.dD)("data-v-7fa163e6"),e=e(),(0,s.Cn)(),e),_={class:"ban"},f={class:"myico yellow_bg"},h={class:"ban_cont"},m=w((()=>(0,s._)("div",{class:"title_b"},"Solde total",-1))),y={class:"contentb"},v={class:"ban"},g={class:"myico green_bg"},S={class:"ban_cont"},k=w((()=>(0,s._)("div",{class:"title_b"},"Solde disponible",-1))),U={class:"contentb"},b={class:"ban"},O={class:"myico orange_bg"},z={class:"ban_cont"},Z=w((()=>(0,s._)("div",{class:"title_b"},"Produits vendus",-1))),T={class:"contentb"},W={style:{"padding-left":"1rem","padding-right":"1rem"}},P=w((()=>(0,s._)("div",{class:"mytitle"},"Historiques des paiements",-1))),$=w((()=>(0,s._)("span",{style:{"font-weight":"bold"}},"Montant: ",-1))),j={style:{color:"gray"}},D=w((()=>(0,s._)("div",{style:{display:"flex","justify-content":"space-around",padding:"2rem"}},[(0,s._)("img",{src:i,style:{width:"60%"}})],-1))),A=w((()=>(0,s._)("div",{style:{"text-align":"center","padding-left":"1.5rem","padding-right":"1.5rem"}}," Aucune transaction trouvé. ",-1))),B=w((()=>(0,s._)("div",{style:{"min-height":"95vh"}},null,-1))),G={__name:"PayPatnerView",setup(e){const t=e=>{const t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString()},a=(0,n.iH)(!1),i=(0,n.iH)(),w=(0,p.tv)(),G=async()=>{const e=await(0,l.QP)("Loading..."),t=await u.Z.get("v2/api/get_ppays/",{headers:{Authorization:`Bearer ${await(0,d.UT)("/seller/pay/",w)}`}});t.data["done"]&&(i.value=t.data["result"],a.value=!0,e.dismiss())};G();const J=async()=>{if(!i.value.solde)return(0,l.Lr)("Retrait impossible","Votre solde est insuffisant.");if(i.value.has_retr)return(0,l.Lr)("Retrait impossible","Vous avez déjà un retrait en cours.");const e=await(0,l.QP)("Loading..."),t=await u.Z.get("v2/api/encaisser/?for=patner",{headers:{Authorization:`Bearer ${await(0,d.UT)("/seller/pay/",w)}`}});t.data["done"]&&(e.dismiss(),await G())};return(e,d)=>{const u=(0,s.up)("ion-icon"),p=(0,s.up)("ion-list");return(0,s.wg)(),(0,s.j4)((0,n.SU)(o._i),null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(o.Gu),null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(o.sr),{color:"tertiary"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(o.Sm),{slot:"start"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(o.oU),{"default-href":"/patner"})])),_:1}),(0,s.Wm)((0,n.SU)(o.wd),null,{default:(0,s.w5)((()=>[(0,s.Uk)("Activité de paiement")])),_:1})])),_:1})])),_:1}),a.value?((0,s.wg)(),(0,s.j4)((0,n.SU)(o.W2),{key:0},{default:(0,s.w5)((()=>[(0,s._)("div",_,[(0,s._)("div",f,[(0,s.Wm)(u,{icon:(0,n.SU)(c.V7I)},null,8,["icon"])]),(0,s._)("div",h,[m,(0,s._)("div",y,"XOF"+(0,r.zw)(i.value.total_solde),1)])]),(0,s._)("div",v,[(0,s._)("div",g,[(0,s.Wm)(u,{icon:(0,n.SU)(c.V7I)},null,8,["icon"])]),(0,s._)("div",S,[k,(0,s._)("div",U,"XOF"+(0,r.zw)(i.value.solde),1)])]),(0,s._)("div",b,[(0,s._)("div",O,[(0,s.Wm)(u,{icon:(0,n.SU)(c.MI)},null,8,["icon"])]),(0,s._)("div",z,[Z,(0,s._)("div",T,(0,r.zw)(i.value.p_count),1)])]),(0,s._)("div",W,[(0,s.Wm)((0,n.SU)(o.YG),{onClick:d[0]||(d[0]=e=>J()),color:"tertiary",expand:"full"},{default:(0,s.w5)((()=>[(0,s.Uk)("Encaisser")])),_:1})]),P,i.value.pays.length?((0,s.wg)(),(0,s.j4)(p,{key:0},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.value.pays,(e=>((0,s.wg)(),(0,s.j4)((0,n.SU)(o.Ie),{key:e.id},{default:(0,s.w5)((()=>[(0,s.Wm)((0,n.SU)(o.Q$),null,{default:(0,s.w5)((()=>[(0,s._)("h2",null,[$,(0,s.Uk)((0,r.zw)(e.currency)+" "+(0,r.zw)(e.montant),1)]),(0,s._)("div",null,[(0,s._)("div",null,[(0,s.Uk)(" Type : "),(0,s._)("span",{style:(0,r.j5)({color:e.get_tcolor})},(0,r.zw)(e.type_of),5)]),(0,s._)("div",null,[(0,s.Uk)(" Etat : "),(0,s._)("span",{style:(0,r.j5)({color:e.get_color})},(0,r.zw)(e.statut),5)]),(0,s._)("div",null,[(0,s.Uk)(" Reference ID : "),(0,s._)("span",null,(0,r.zw)(e.transaction_id),1)]),(0,s._)("div",j,(0,r.zw)(t(e.created_at)),1)])])),_:2},1024),(0,s.Wm)((0,n.SU)(o.YG),{onClick:d[1]||(d[1]=e=>(0,n.SU)(l.bw)(i.value.call_num)),color:"tertiary",slot:"end"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{slot:"icon-only",icon:(0,n.SU)(c.REe)},null,8,["icon"])])),_:1})])),_:2},1024)))),128))])),_:1})):((0,s.wg)(),(0,s.j4)(p,{key:1},{default:(0,s.w5)((()=>[D,A])),_:1}))])),_:1})):((0,s.wg)(),(0,s.j4)((0,n.SU)(o.W2),{key:1},{default:(0,s.w5)((()=>[B])),_:1}))])),_:1})}}};var J=a(3744);const N=(0,J.Z)(G,[["__scopeId","data-v-7fa163e6"]]),C=N}}]);
//# sourceMappingURL=832-legacy.e758238f.js.map