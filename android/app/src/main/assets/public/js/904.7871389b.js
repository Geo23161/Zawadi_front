"use strict";(self["webpackChunkZawadi"]=self["webpackChunkZawadi"]||[]).push([[904],{8071:(e,a,t)=>{t.d(a,{BO:()=>n,UT:()=>o,ZP:()=>i});t(8862),t(7658);var s=t(3978),r=t(8433);const n=async()=>{const e=new s.K({name:"patner_info"});e.create();const a=await e.get("ptoken");if(!a)return!1;{const s=JSON.parse(a);try{const e=await(0,r.Z)({url:"v2/ping",method:"GET",headers:{Authorization:`Bearer ${s.access}`}});if(e.data["done"])return!0}catch(t){if(401==t.response.status){const a=new FormData;a.append("refresh",s.refresh);try{const t=await(0,r.Z)({url:"api/token/refresh/",method:"POST",data:a});return s.access=t.data["access"],e.set("ptoken",JSON.stringify(s)),!0}catch(t){if(401==t.response.status)return!1}}}}},o=async(e,a,t)=>{const n=new s.K({name:"patner_info"});n.create();const o=await n.get("ptoken");if(!o)return t&&t.dismiss(),a.push(`/seller?redirect=${e}`);{const t=JSON.parse(o);try{await(0,r.Z)({url:"v2/ping",method:"GET",headers:{Authorization:`Bearer ${t.access}`}});return t.access}catch(i){if(401==i.response.status){const s=new FormData;s.append("refresh",t.refresh);try{const e=await(0,r.Z)({url:"api/token/refresh/",method:"POST",data:s});return t.access=e.data["access"],n.set("ptoken",JSON.stringify(t)),e.data["access"]}catch(i){if(401==i.response.status)return a.push(`/seller?redirect=${e}`)}}}}},i=o},5402:(e,a,t)=>{t.d(a,{BO:()=>o,Lr:()=>l,QP:()=>i,UT:()=>d,bw:()=>w,ob:()=>u,uZ:()=>c});t(8862),t(7658);var s=t(3978),r=t(3274),n=t(8433);const o=async()=>{const e=new s.K({name:"seller_info"});e.create();const a=await e.get("stoken");if(!a)return!1;{const s=JSON.parse(a);try{const e=await(0,n.Z)({url:"v2/ping",method:"GET",headers:{Authorization:`Bearer ${s.access}`}});if(e.data["done"])return!0}catch(t){if(401==t.response.status){const a=new FormData;a.append("refresh",s.refresh);try{const t=await(0,n.Z)({url:"api/token/refresh/",method:"POST",data:a});return s.access=t.data["access"],e.set("stoken",JSON.stringify(s)),!0}catch(t){if(401==t.response.status)return!1}}}}},i=async e=>{const a=await r.G0.create({message:e});return a.present(),a},l=async(e,a)=>{const t=await r.Cl.create({header:e,message:a,buttons:["OK"]});await t.present()},c=async(e,a,t,s)=>{const n=await r.Cl.create({header:e,message:a,buttons:[{text:"Fermer",role:"cancel"},{text:t,role:"confirm",handler:()=>{s()}}]});await n.present()},u=async(e,a,t="primary")=>{const s=await r.Mn.create({mode:"ios",message:a,position:e,duration:3900,color:t});await s.present()},d=async(e,a,t)=>{const r=new s.K({name:"seller_info"});r.create();const o=await r.get("stoken");if(!o)return t&&t.dismiss(),a.push(`/seller?redirect=${e}`);{const t=JSON.parse(o);try{await(0,n.Z)({url:"v2/ping",method:"GET",headers:{Authorization:`Bearer ${t.access}`}});return t.access}catch(i){if(401==i.response.status){const s=new FormData;s.append("refresh",t.refresh);try{const e=await(0,n.Z)({url:"api/token/refresh/",method:"POST",data:s});return t.access=e.data["access"],r.set("stoken",JSON.stringify(t)),e.data["access"]}catch(i){if(401==i.response.status)return a.push(`/seller?redirect=${e}`)}}}}},w=e=>{window.location.href="tel:"+e}},5904:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Z});t(3948),t(7658);var s=t(6252),r=t(2262),n=t(9963),o=t(3577),i=t(5402),l=t(8071),c=t(8433),u=t(2201),d=t(3274),w=t(8903);const f=e=>((0,s.dD)("data-v-18be4113"),e=e(),(0,s.Cn)(),e),m=f((()=>(0,s._)("div",{style:{"min-height":"95vh"}},null,-1))),v={class:"body_all"},p={class:"aid"},h={style:{"margin-right":"0.4rem"}},k=f((()=>(0,s._)("div",null,"Choississez une catégorie",-1))),g={key:0,id:"product"},_={key:0,class:"choose_cont",id:"label"},y=["src"],b={key:0,class:"choose_cont",id:"cat"},S=["src"],W={key:0,class:"choose_cont",id:"sub"},U={key:0,class:"choose_cont",id:"ssub"},C={key:2,style:{padding:"1rem"}},D=(0,s.aZ)({__name:"AddCatPatner",setup(e){const a=(0,u.tv)(),t=((0,u.yj)(),(0,r.iH)(0)),f=(0,r.iH)(0),D=(0,r.iH)(0),T=(0,r.iH)(0),O=(0,r.iH)(0),Z=(0,r.iH)(!1),H=(0,r.iH)([]),z=(0,r.iH)(""),J=(0,r.iH)(!1),P=e=>{let a=[];switch(e){case 0:a=H.value;break;case 1:for(const e of H.value)e.id==f.value&&(a=e.cats);break;case 2:for(const e of H.value)for(const t of e.cats)t.id==D.value&&(a=t.subs);break;case 3:for(const e of H.value)for(const t of e.cats){let e;if(t.id==D.value)for(e of t.subs)e.id==T.value&&(a=e.subs)}1!=a.length||J.value||(K(),J.value=!0);break}return a},$=async()=>{const e=await(0,i.QP)("Loading...");(0,c.Z)({url:"v2/api/get_tree_cats/",method:"GET"}).then((a=>{a.data["done"]&&(H.value=a.data["result"],e.dismiss(),Z.value=!0)})).catch((e=>{console.log(e)}))},B=()=>{t.value?4==t.value&&1==P(3).length?t.value=2:t.value=t.value-1:a.back()},K=async()=>{const e=await(0,i.QP)("Ajout..."),t=await(0,c.Z)({url:"v2/api/padd_sub/",method:"POST",data:{subp:O.value?O.value:T.value,livraison:z.value},headers:{Authorization:`Bearer ${await(0,l.UT)("/patner/add/",a,void 0)}`}});t.data["done"]&&(e.dismiss(),a.push(`/patner/cat/${t.data["result"]}`))};return $(),(e,a)=>{const i=(0,s.up)("ion-title"),l=(0,s.up)("ion-toolbar"),c=(0,s.up)("ion-header"),u=(0,s.up)("ion-icon"),H=(0,s.up)("ion-label"),z=(0,s.up)("ion-list");(0,s.up)("ion-textarea");return(0,s.wg)(),(0,s.j4)((0,r.SU)(d._i),null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{mode:"ios"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,r.SU)(d.Sm),{slot:"start"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,r.SU)(d.oU),{"default-href":"/patner/home"})])),_:1}),(0,s.Wm)(i,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Choisissez votre Catégorie")])),_:1})])),_:1})])),_:1}),Z.value?((0,s.wg)(),(0,s.j4)((0,r.SU)(d.W2),{key:1},{default:(0,s.w5)((()=>[(0,s._)("div",v,[(0,s._)("div",p,[(0,s._)("div",h,[(0,s.Wm)((0,r.SU)(d.YG),{onClick:a[0]||(a[0]=e=>B()),color:"secondary"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{slot:"icon-only",icon:(0,r.SU)(w.XRs)},null,8,["icon"])])),_:1})]),k]),t.value<4?((0,s.wg)(),(0,s.iD)("div",g,[(0,s.Wm)(n.uT,{name:"down"},{default:(0,s.w5)((()=>[t.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",_,[(0,s.Wm)(z,{style:{background:"rgb(238, 238, 238)"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(P(t.value),(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id,class:"d_sp"},[(0,s.Wm)((0,r.SU)(d.Ie),{onClick:a=>(f.value=e.id,t.value++),button:"",detail:"true"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,r.SU)(d.BJ),{slot:"start"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:e.get_picture},null,8,y)])),_:2},1024),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"])])))),128))])),_:1})]))])),_:1}),(0,s.Wm)(n.uT,{name:"down"},{default:(0,s.w5)((()=>[1==t.value?((0,s.wg)(),(0,s.iD)("div",b,[(0,s.Wm)(z,{style:{background:"rgb(238, 238, 238)"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(P(t.value),(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id,class:"d_sp"},[(0,s.Wm)((0,r.SU)(d.Ie),{onClick:a=>(t.value++,D.value=e.id),button:"",detail:"true"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,r.SU)(d.BJ),{slot:"start"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:e.get_picture},null,8,S)])),_:2},1024),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"])])))),128))])),_:1})])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(n.uT,{name:"down"},{default:(0,s.w5)((()=>[2==t.value?((0,s.wg)(),(0,s.iD)("div",W,[(0,s.Wm)(z,{style:{background:"rgb(238, 238, 238)"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(P(t.value),(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id,class:"d_sp"},[(0,s.Wm)((0,r.SU)(d.Ie),{onClick:a=>(T.value=e.id,t.value++,O.value=0),button:"",detail:"true"},{default:(0,s.w5)((()=>[(0,s.kq)("",!0),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"])])))),128))])),_:1})])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(n.uT,{name:"down"},{default:(0,s.w5)((()=>[3==t.value?((0,s.wg)(),(0,s.iD)("div",U,[(0,s.Wm)(z,{style:{background:"rgb(238, 238, 238)"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(P(t.value),(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id,class:"d_sp"},[(0,s.Wm)((0,r.SU)(d.Ie),{onClick:a=>O.value==e.id?O.value=0:O.value=e.id,button:""},{default:(0,s.w5)((()=>[(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.name),1)])),_:2},1024),(0,s.Wm)((0,r.SU)(d.nz),{color:"primary",mode:"ios",checked:O.value==e.id,slot:"start"},null,8,["checked"])])),_:2},1032,["onClick"])])))),128))])),_:1})])):(0,s.kq)("",!0)])),_:1})])):(0,s.kq)("",!0),(0,s.kq)("",!0),0!=O.value&&3==t.value?((0,s.wg)(),(0,s.iD)("div",C,[(0,s.Wm)((0,r.SU)(d.YG),{onClick:a[2]||(a[2]=e=>K()),expand:"full",color:"secondary"},{default:(0,s.w5)((()=>[(0,s.Uk)("Ajouter cette catégorie")])),_:1})])):(0,s.kq)("",!0)])])),_:1})):((0,s.wg)(),(0,s.j4)((0,r.SU)(d.W2),{key:0},{default:(0,s.w5)((()=>[m])),_:1}))])),_:1})}}});var T=t(3744);const O=(0,T.Z)(D,[["__scopeId","data-v-18be4113"]]),Z=O}}]);
//# sourceMappingURL=904.7871389b.js.map