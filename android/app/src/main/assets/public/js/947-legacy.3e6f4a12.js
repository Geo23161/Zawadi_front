"use strict";(self["webpackChunkZawadi"]=self["webpackChunkZawadi"]||[]).push([[947],{5402:(e,a,t)=>{t.d(a,{BO:()=>n,Lr:()=>u,QP:()=>i,UT:()=>c,bw:()=>w,ob:()=>d,uZ:()=>r});t(8862),t(7658);var s=t(3978),l=t(3274),o=t(8433);const n=async()=>{const e=new s.K({name:"seller_info"});e.create();const a=await e.get("stoken");if(!a)return!1;{const s=JSON.parse(a);try{const e=await(0,o.Z)({url:"v2/ping",method:"GET",headers:{Authorization:`Bearer ${s.access}`}});if(e.data["done"])return!0}catch(t){if(401==t.response.status){const a=new FormData;a.append("refresh",s.refresh);try{const t=await(0,o.Z)({url:"api/token/refresh/",method:"POST",data:a});return s.access=t.data["access"],e.set("stoken",JSON.stringify(s)),!0}catch(t){if(401==t.response.status)return!1}}}}},i=async e=>{const a=await l.G0.create({message:e});return a.present(),a},u=async(e,a)=>{const t=await l.Cl.create({header:e,message:a,buttons:["OK"]});await t.present()},r=async(e,a,t,s)=>{const o=await l.Cl.create({header:e,message:a,buttons:[{text:"Fermer",role:"cancel"},{text:t,role:"confirm",handler:()=>{s()}}]});await o.present()},d=async(e,a,t="primary")=>{const s=await l.Mn.create({mode:"ios",message:a,position:e,duration:3900,color:t});await s.present()},c=async(e,a,t)=>{const l=new s.K({name:"seller_info"});l.create();const n=await l.get("stoken");if(!n)return t&&t.dismiss(),a.push(`/seller?redirect=${e}`);{const t=JSON.parse(n);try{await(0,o.Z)({url:"v2/ping",method:"GET",headers:{Authorization:`Bearer ${t.access}`}});return t.access}catch(i){if(401==i.response.status){const s=new FormData;s.append("refresh",t.refresh);try{const e=await(0,o.Z)({url:"api/token/refresh/",method:"POST",data:s});return t.access=e.data["access"],l.set("stoken",JSON.stringify(t)),e.data["access"]}catch(i){if(401==i.response.status)return a.push(`/seller?redirect=${e}`)}}}}},w=e=>{window.location.href="tel:"+e}},1947:(e,a,t)=>{t.r(a),t.d(a,{default:()=>j});t(3948),t(7658);var s=t(6252),l=t(2262),o=t(9963),n=t(3577),i=t(5402),u=t(8433),r=t(2201),d=t(3274),c=t(8903);const w=e=>((0,s.dD)("data-v-752ef7da"),e=e(),(0,s.Cn)(),e),v=w((()=>(0,s._)("div",{style:{"min-height":"95vh"}},null,-1))),m={class:"body_all"},f={class:"aid"},_={style:{"margin-right":"0.4rem"}},g=w((()=>(0,s._)("div",null,"Choississez une catégorie à ajouter",-1))),k={key:0,id:"product"},p={key:0,class:"choose_cont",id:"label"},h=["src"],y={key:0,class:"choose_cont",id:"cat"},b=["src"],W={key:0,class:"choose_cont",id:"sub"},U={key:0,class:"choose_cont",id:"ssub"},S={key:1,id:"detail"},D={class:"choose_cont"},C={class:"d_sp"},z=w((()=>(0,s._)("div",{style:{"text-align":"center",padding:"0.8rem"}},"Livrez-vous ce type de produits?",-1))),H={key:2,style:{padding:"1rem"}},T=(0,s.aZ)({__name:"AddPage",setup(e){const a=(0,r.tv)(),t=((0,r.yj)(),(0,l.iH)(0)),w=(0,l.iH)(0),T=(0,l.iH)(0),Z=(0,l.iH)(0),O=(0,l.iH)(0),j=(0,l.iH)(!1),I=(0,l.iH)([]),A=(0,l.iH)(""),K=e=>{let a=[];switch(e){case 0:a=I.value;break;case 1:for(const e of I.value)e.id==w.value&&(a=e.cats);break;case 2:for(const e of I.value)for(const t of e.cats)t.id==T.value&&(a=t.subs);break;case 3:for(const e of I.value)for(const t of e.cats){let e;if(t.id==T.value)for(e of t.subs)e.id==Z.value&&(a=e.subs)}1==a.length&&t.value++;break}return a},P=async()=>{const e=await(0,i.QP)("Loading...");(0,u.Z)({url:"v2/api/get_tree_cats/",method:"GET"}).then((a=>{a.data["done"]&&(I.value=a.data["result"],e.dismiss(),j.value=!0)})).catch((e=>{console.log(e)}))},q=()=>{t.value?4==t.value&&1==K(3).length?t.value=2:t.value=t.value-1:a.back()},x=async()=>{const e=await(0,i.QP)("Ajout..."),t=await(0,u.Z)({url:"v2/api/add_sub/",method:"POST",data:{subp:O.value?O.value:Z.value,livraison:A.value},headers:{Authorization:`Bearer ${await(0,i.UT)("/seller/add/",a,void 0)}`}});t.data["done"]&&(e.dismiss(),a.push(`/seller/product/${t.data["result"]}`))};return P(),(e,a)=>{const i=(0,s.up)("ion-title"),u=(0,s.up)("ion-toolbar"),r=(0,s.up)("ion-header"),I=(0,s.up)("ion-icon"),P=(0,s.up)("ion-label"),B=(0,s.up)("ion-list"),G=(0,s.up)("ion-textarea");return(0,s.wg)(),(0,s.j4)((0,l.SU)(d._i),null,{default:(0,s.w5)((()=>[(0,s.Wm)(r,{mode:"ios"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)((0,l.SU)(d.Sm),{slot:"start"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,l.SU)(d.oU),{"default-href":"/seller/home"})])),_:1}),(0,s.Wm)(i,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Ajoutez une Catégorie")])),_:1})])),_:1})])),_:1}),j.value?((0,s.wg)(),(0,s.j4)((0,l.SU)(d.W2),{key:1},{default:(0,s.w5)((()=>[(0,s._)("div",m,[(0,s._)("div",f,[(0,s._)("div",_,[(0,s.Wm)((0,l.SU)(d.YG),{onClick:a[0]||(a[0]=e=>q()),color:"secondary"},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{slot:"icon-only",icon:(0,l.SU)(c.XRs)},null,8,["icon"])])),_:1})]),g]),t.value<4?((0,s.wg)(),(0,s.iD)("div",k,[(0,s.Wm)(o.uT,{name:"down"},{default:(0,s.w5)((()=>[t.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",p,[(0,s.Wm)(B,{style:{background:"rgb(238, 238, 238)"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(K(t.value),(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id,class:"d_sp"},[(0,s.Wm)((0,l.SU)(d.Ie),{onClick:a=>(w.value=e.id,t.value++),button:"",detail:"true"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,l.SU)(d.BJ),{slot:"start"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:e.get_picture},null,8,h)])),_:2},1024),(0,s.Wm)(P,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"])])))),128))])),_:1})]))])),_:1}),(0,s.Wm)(o.uT,{name:"down"},{default:(0,s.w5)((()=>[1==t.value?((0,s.wg)(),(0,s.iD)("div",y,[(0,s.Wm)(B,{style:{background:"rgb(238, 238, 238)"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(K(t.value),(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id,class:"d_sp"},[(0,s.Wm)((0,l.SU)(d.Ie),{onClick:a=>(t.value++,T.value=e.id),button:"",detail:"true"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,l.SU)(d.BJ),{slot:"start"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:e.get_picture},null,8,b)])),_:2},1024),(0,s.Wm)(P,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"])])))),128))])),_:1})])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(o.uT,{name:"down"},{default:(0,s.w5)((()=>[2==t.value?((0,s.wg)(),(0,s.iD)("div",W,[(0,s.Wm)(B,{style:{background:"rgb(238, 238, 238)"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(K(t.value),(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id,class:"d_sp"},[(0,s.Wm)((0,l.SU)(d.Ie),{onClick:a=>(Z.value=e.id,t.value++),button:"",detail:"true"},{default:(0,s.w5)((()=>[(0,s.kq)("",!0),(0,s.Wm)(P,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"])])))),128))])),_:1})])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(o.uT,{name:"down"},{default:(0,s.w5)((()=>[3==t.value?((0,s.wg)(),(0,s.iD)("div",U,[(0,s.Wm)(B,{style:{background:"rgb(238, 238, 238)"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(K(t.value),(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id,class:"d_sp"},[(0,s.Wm)((0,l.SU)(d.Ie),{onClick:a=>(O.value=e.id,t.value++),button:"",detail:"true"},{default:(0,s.w5)((()=>[(0,s.Wm)(P,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.name),1)])),_:2},1024),(0,s.Wm)((0,l.SU)(d.nz),{color:"primary",mode:"ios",checked:O.value==e.id,slot:"start"},null,8,["checked"])])),_:2},1032,["onClick"])])))),128))])),_:1})])):(0,s.kq)("",!0)])),_:1})])):((0,s.wg)(),(0,s.iD)("div",S,[(0,s._)("div",D,[(0,s.Wm)(B,{style:{background:"rgb(238, 238, 238)"}},{default:(0,s.w5)((()=>[(0,s._)("div",C,[z,(0,s.Wm)((0,l.SU)(d.Ie),null,{default:(0,s.w5)((()=>[(0,s.Wm)(G,{"auto-grow":!0,value:A.value,onIonInput:a[1]||(a[1]=e=>A.value=e.target.value),placeholder:"oui ou non... si oui, donnez une description(prix, villes)"},null,8,["value"])])),_:1})])])),_:1})])])),4==t.value?((0,s.wg)(),(0,s.iD)("div",H,[(0,s.Wm)((0,l.SU)(d.YG),{onClick:a[2]||(a[2]=e=>x()),expand:"full",color:"secondary"},{default:(0,s.w5)((()=>[(0,s.Uk)("Ajouter cette catégorie")])),_:1})])):(0,s.kq)("",!0)])])),_:1})):((0,s.wg)(),(0,s.j4)((0,l.SU)(d.W2),{key:0},{default:(0,s.w5)((()=>[v])),_:1}))])),_:1})}}});var Z=t(3744);const O=(0,Z.Z)(T,[["__scopeId","data-v-752ef7da"]]),j=O}}]);
//# sourceMappingURL=947-legacy.3e6f4a12.js.map